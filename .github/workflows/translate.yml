# .github/workflows/translate.yml
name: 繁体转简体（固定文件名）

on:
  workflow_dispatch:   # 手动点 Run workflow 触发

jobs:
  convert:
    runs-on: ubuntu-latest
    steps:
      - name: 拉取仓库代码
        uses: actions/checkout@v4

      - name: 设置 Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.11'

      - name: 安装 opencc
        run: pip install opencc-python-reimplemented

      - name: 执行翻译：input.txt → output.txt
        run: |
          echo "正在把 input.txt 翻译成简体..."
          python converter.py input.txt output.txt
          echo "翻译完成！"
          echo "========= output.txt 内容预览 ========="
          cat output.txt

      - name: 上传结果（点一下就能下载 output.txt）
        uses: actions/upload-artifact@v4
        with:
          name: 翻译结果-output.txt
          path: output.txt
